<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <title></title>

    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">

    <style>
        
    </style>
    <script>
        $(document).ready(function(){
          listing();
        });

        function listing() {
            fetch('/main').then((res) => res.json()).then((data) => {
            let rows = data['result']
                                       
            $('#bab-box').empty()

            rows.forEach((a)=>{
                let name = a['name']
                let urlimage = a['urlimage']
                let total_star = a['total_star']
                
                let temp_html =`<div class="col">
                                    <div class="card h-100">
                                        <img src="${urlimage}"
                                            class="card-img-top">
                                        <div class="card-body">
                                            <h5 class="bab-title">식당이름 : ${name}</h5>
                                            <p id="star">총점수 : ${total_star}</P>
                                        </div>
                                    </div>
                                </div>`
                  $('#bab-box').append(temp_html)
                })
              })
        }

        function posting() {
            let url = $('#url').val()
            let name = $('#name').val()
            let star = $('#star').val()

			let formData = new FormData();
            formData.append("url_give", url);
            formData.append("name_give", name);
            formData.append("star_give", star);

            fetch('/main', {method : "POST",body : formData}).then((res) => res.json()).then((data) => {
             alert(data['msg'])
             window.location.reload()
            })
            
        }
    </script>
</head>

<body>
<div class="mytitle">
    <h1>나의 밥도둑 식당 소개!</h1>

</div>
<div class="mybab">
    <div class="row row-cols-1 row-cols-md-4 g-4" id="bab-box">
        <div class="col">
            <div class="card h-100">
                <img src="https://www.fsnews.co.kr/news/photo/202207/46076_38598_3042.jpg"
                     class="card-img-top">
                <div class="card-body">
                    <h5 class="bab-title">식당이름</h5>
                    <p>총점</p>
                </div>
            </div>
        </div>
    </div>
</div>
</body>

</html>